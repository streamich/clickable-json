"use strict";(self.webpackChunkclickable_json=self.webpackChunkclickable_json||[]).push([[363],{"./src/ClickableJsonCrdt/index.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ConstantRoot:()=>ConstantRoot,ConstantRootJson:()=>ConstantRootJson,EmptyDoc:()=>EmptyDoc,Primary:()=>Primary,ShowRoot:()=>ShowRoot,__namedExportsOrder:()=>__namedExportsOrder,default:()=>index_stories});var react=__webpack_require__("./node_modules/react/index.js");const context=react.createContext(null),useJsonCrdt=()=>react.useContext(context);var style=__webpack_require__("./src/context/style.ts");class NodeRef{constructor(node,parent,step){this.node=node,this.parent=parent,this.step=step}}var Root=__webpack_require__("./src/Root/index.tsx"),context_focus=__webpack_require__("./src/context/focus.tsx"),json_crdt=__webpack_require__("./node_modules/json-joy/es2020/json-crdt/index.js"),lib=__webpack_require__("./node_modules/nano-theme/lib/index.js"),css=__webpack_require__("./src/css.ts"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const PropertyLayout=_ref=>{let{property,formal,focused}=_ref;const theme=(0,lib.useTheme)(),style={color:theme.g(.1)};return focused&&(style.background=theme.bg,style.border=`1px solid ${theme.g(.9)}`,style.fontWeight="bold",style.margin="-3px",style.padding="2px"),property&&-1===property.indexOf(" ")||(style.background=theme.blue(.1)),(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("span",{className:css.Cb,style,children:formal?JSON.stringify(property):property}),(0,jsx_runtime.jsx)("span",{className:css.ob,style:{color:theme.g(.5)},children:(0,jsx_runtime.jsx)("span",{children:":"})})]})};try{PropertyLayout.displayName="PropertyLayout",PropertyLayout.__docgenInfo={description:"",displayName:"PropertyLayout",props:{property:{defaultValue:null,description:"",name:"property",required:!0,type:{name:"string"}},formal:{defaultValue:null,description:"",name:"formal",required:!1,type:{name:"boolean"}},focused:{defaultValue:null,description:"",name:"focused",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/PropertyLayout/index.tsx#PropertyLayout"]={docgenInfo:PropertyLayout.__docgenInfo,name:"PropertyLayout",path:"src/PropertyLayout/index.tsx#PropertyLayout"})}catch(__react_docgen_typescript_loader_error){}const JsonCrdtProperty=_ref=>{let{node}=_ref;return node.parent&&"obj"===node.parent.node.name()?(0,jsx_runtime.jsx)(PropertyLayout,{property:node.step}):null};JsonCrdtProperty.displayName="JsonCrdtProperty";try{JsonCrdtProperty.displayName="JsonCrdtProperty",JsonCrdtProperty.__docgenInfo={description:"",displayName:"JsonCrdtProperty",props:{node:{defaultValue:null,description:"",name:"node",required:!0,type:{name:"NodeRef<JsonNode<unknown>>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ClickableJsonCrdt/JsonCrdtProperty.tsx#JsonCrdtProperty"]={docgenInfo:JsonCrdtProperty.__docgenInfo,name:"JsonCrdtProperty",path:"src/ClickableJsonCrdt/JsonCrdtProperty.tsx#JsonCrdtProperty"})}catch(__react_docgen_typescript_loader_error){}var FocusRegion=__webpack_require__("./src/FocusRegion/index.tsx");const id=node=>{const id=node.node.id;return id.sid+"."+id.time},blockClass=(0,lib.rule)({...lib.theme.font.mono,fz:"10px",lh:"9px",us:"none",pe:"none"}),TypeAndId=react.memo((_ref=>{let{node,active}=_ref;const theme=(0,lib.useTheme)(),{sid,time}=node.node.id;return(0,jsx_runtime.jsxs)("span",{className:blockClass,style:{color:active?theme.color.sem.blue[0]:theme.g(0,.5)},children:[node.node.name(),(0,jsx_runtime.jsxs)("span",{style:{color:active?theme.g(0,.45):theme.g(0,.2),display:"block"},children:[active?(sid>999?"...":"")+String(sid).slice(String(sid).length-4):null,(0,jsx_runtime.jsx)("span",{style:{color:active?theme.g(0,.7):theme.g(0,.3)},children:"."+time})]})]})}));try{TypeAndId.displayName="TypeAndId",TypeAndId.__docgenInfo={description:"",displayName:"TypeAndId",props:{node:{defaultValue:null,description:"",name:"node",required:!0,type:{name:"NodeRef<any>"}},active:{defaultValue:null,description:"",name:"active",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ClickableJsonCrdt/TypeAndId.tsx#TypeAndId"]={docgenInfo:TypeAndId.__docgenInfo,name:"TypeAndId",path:"src/ClickableJsonCrdt/TypeAndId.tsx#TypeAndId"})}catch(__react_docgen_typescript_loader_error){}const JsonCrdtRegion=_ref=>{let{node,children}=_ref;const{compact}=(0,style.y)(),{focused,focus,pointed,point}=(0,context_focus.KK)(),nodeId=id(node),isFocused=focused===nodeId,isPointed=pointed===nodeId,aside=isFocused?(0,jsx_runtime.jsx)("span",{style:{display:"inline-block",margin:"-4px 0 0"},children:(0,jsx_runtime.jsx)(TypeAndId,{node,active:isFocused})}):void 0;return(0,jsx_runtime.jsx)(FocusRegion._,{pointed:isPointed,focused:isFocused,compact,aside,onClick:e=>{e.preventDefault(),e.stopPropagation(),focus(nodeId)},onMouseMove:e=>{e.stopPropagation(),pointed!==nodeId&&point(nodeId)},onMouseEnter:e=>{e.preventDefault(),e.stopPropagation(),point(nodeId)},onMouseLeave:()=>{point("")},children})};JsonCrdtRegion.displayName="JsonCrdtRegion";try{JsonCrdtRegion.displayName="JsonCrdtRegion",JsonCrdtRegion.__docgenInfo={description:"",displayName:"JsonCrdtRegion",props:{node:{defaultValue:null,description:"",name:"node",required:!0,type:{name:"NodeRef<any>"}},aside:{defaultValue:null,description:"",name:"aside",required:!1,type:{name:"ReactNode"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ClickableJsonCrdt/JsonCrdtRegion.tsx#JsonCrdtRegion"]={docgenInfo:JsonCrdtRegion.__docgenInfo,name:"JsonCrdtRegion",path:"src/ClickableJsonCrdt/JsonCrdtRegion.tsx#JsonCrdtRegion"})}catch(__react_docgen_typescript_loader_error){}var JsonAtom=__webpack_require__("./src/JsonAtom/index.tsx"),ClickableJson=__webpack_require__("./src/ClickableJson/index.tsx");const JsonCrdtConNode=_ref=>{let{node}=_ref;const{formal}=(0,style.y)(),{focus}=(0,context_focus.KK)(),[viewJson,setViewJson]=react.useState(!1),view=node.node.view();return(0,jsx_runtime.jsxs)(JsonCrdtRegion,{node,children:[(0,jsx_runtime.jsx)(JsonCrdtProperty,{node}),viewJson?(0,jsx_runtime.jsx)("span",{style:{display:"inline-block",verticalAlign:"top",margin:"-1px"},children:(0,jsx_runtime.jsx)(ClickableJson.H,{readonly:!0,compact:!0,noCollapseToggles:!0,pfx:id(node),doc:node.node.view(),onFocus:p=>{null!==p&&focus(id(node))}})}):(0,jsx_runtime.jsx)(JsonAtom.c,{value:node.node.view(),onClick:()=>{view&&"object"==typeof view&&setViewJson(!viewJson)}}),!!formal&&","]})};JsonCrdtConNode.displayName="JsonCrdtConNode";try{JsonCrdtConNode.displayName="JsonCrdtConNode",JsonCrdtConNode.__docgenInfo={description:"",displayName:"JsonCrdtConNode",props:{node:{defaultValue:null,description:"",name:"node",required:!0,type:{name:"NodeRef<ConNode<unknown>>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ClickableJsonCrdt/nodes/JsonCrdtConNode.tsx#JsonCrdtConNode"]={docgenInfo:JsonCrdtConNode.__docgenInfo,name:"JsonCrdtConNode",path:"src/ClickableJsonCrdt/nodes/JsonCrdtConNode.tsx#JsonCrdtConNode"})}catch(__react_docgen_typescript_loader_error){}var ObjectLayout=__webpack_require__("./src/ObjectLayout/index.tsx");const JsonCrdtObjectLayout=_ref=>{let{node,...rest}=_ref;const{collapsed:startsCollapsed}=(0,style.y)(),{focused}=(0,context_focus.KK)(),[collapsed,setCollapsed]=react.useState(startsCollapsed);return(0,jsx_runtime.jsx)(ObjectLayout.D,{collapsed,onCollapserClick:()=>setCollapsed(!collapsed),onBracketClick:()=>{collapsed||id(node)!==focused||setCollapsed(!0)},onCollapsedClick:()=>{collapsed&&setCollapsed(!1)},...rest})};JsonCrdtObjectLayout.displayName="JsonCrdtObjectLayout";try{JsonCrdtObjectLayout.displayName="JsonCrdtObjectLayout",JsonCrdtObjectLayout.__docgenInfo={description:"",displayName:"JsonCrdtObjectLayout",props:{node:{defaultValue:null,description:"",name:"node",required:!0,type:{name:"NodeRef<JsonNode<unknown>>"}},property:{defaultValue:null,description:"",name:"property",required:!1,type:{name:"ReactNode"}},collapsedView:{defaultValue:null,description:"",name:"collapsedView",required:!1,type:{name:"ReactNode"}},header:{defaultValue:null,description:"",name:"header",required:!1,type:{name:"ReactNode"}},collapsed:{defaultValue:null,description:"",name:"collapsed",required:!1,type:{name:"boolean"}},comma:{defaultValue:null,description:"",name:"comma",required:!1,type:{name:"boolean"}},brackets:{defaultValue:null,description:"",name:"brackets",required:!1,type:{name:"[opening: string, closing: string]"}},manageCollapse:{defaultValue:null,description:"",name:"manageCollapse",required:!1,type:{name:"boolean"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"MouseEventHandler<Element>"}},onCollapserClick:{defaultValue:null,description:"",name:"onCollapserClick",required:!1,type:{name:"MouseEventHandler<Element>"}},onCollapsedClick:{defaultValue:null,description:"",name:"onCollapsedClick",required:!1,type:{name:"MouseEventHandler<Element>"}},onBracketClick:{defaultValue:null,description:"",name:"onBracketClick",required:!1,type:{name:"(() => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ClickableJsonCrdt/JsonCrdtObjectLayout.tsx#JsonCrdtObjectLayout"]={docgenInfo:JsonCrdtObjectLayout.__docgenInfo,name:"JsonCrdtObjectLayout",path:"src/ClickableJsonCrdt/JsonCrdtObjectLayout.tsx#JsonCrdtObjectLayout"})}catch(__react_docgen_typescript_loader_error){}const JsonCrdtValNode=_ref=>{let{node}=_ref;const{render}=useJsonCrdt(),childNode=node.node.node(),child=(0,jsx_runtime.jsx)("span",{className:css.jv,children:render(new NodeRef(childNode,node,""))});let collapsedView="…";if("con"===childNode.name()){const view=childNode.view();collapsedView=(0,jsx_runtime.jsx)(JsonAtom.c,{value:view})}return(0,jsx_runtime.jsx)(JsonCrdtRegion,{node,children:(0,jsx_runtime.jsx)(JsonCrdtObjectLayout,{node,property:(0,jsx_runtime.jsx)(JsonCrdtProperty,{node}),collapsedView,brackets:["(",")"],children:child})})};JsonCrdtValNode.displayName="JsonCrdtValNode";try{JsonCrdtValNode.displayName="JsonCrdtValNode",JsonCrdtValNode.__docgenInfo={description:"",displayName:"JsonCrdtValNode",props:{node:{defaultValue:null,description:"",name:"node",required:!0,type:{name:"NodeRef<ValNode<JsonNode<unknown>>>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ClickableJsonCrdt/nodes/JsonCrdtValNode.tsx#JsonCrdtValNode"]={docgenInfo:JsonCrdtValNode.__docgenInfo,name:"JsonCrdtValNode",path:"src/ClickableJsonCrdt/nodes/JsonCrdtValNode.tsx#JsonCrdtValNode"})}catch(__react_docgen_typescript_loader_error){}var use_t_lib=__webpack_require__("./node_modules/use-t/lib/index.js"),utils=__webpack_require__("./src/ClickableJson/utils.tsx"),FlexibleInput=__webpack_require__("./src/FlexibleInput/index.tsx");const ObjectInsert=_ref=>{let{visible,onSubmit}=_ref;const[t]=(0,use_t_lib.NT)(),[editing,setEditing]=react.useState(!1),[property,setProperty]=react.useState(""),[value,setValue]=react.useState(""),inputPropertyRef=react.useRef(null),inputValueRef=react.useRef(null),insButtonClass=css.h6(),theme=(0,lib.useTheme)(),handleSubmit=()=>{inputValueRef.current&&inputValueRef.current.blur(),onSubmit(property,value),setProperty(""),setValue(""),setEditing(!1)};if(!visible)return null;if(editing){const keyInput=(0,jsx_runtime.jsx)("span",{className:css.Cb+css.qH,style:{color:theme.g(.1),background:theme.bg,display:visible?void 0:"none",margin:"-1px 0 -1px -2px",padding:"3px 4px",border:`1px solid ${theme.g(.85)}`,fontWeight:"bold"},children:(0,jsx_runtime.jsx)(FlexibleInput.o,{focus:!0,inp:el=>inputPropertyRef.current=el,value:property,onChange:e=>setProperty(e.target.value),onBlur:()=>{inputValueRef.current&&inputValueRef.current.focus()},onSubmit:()=>{inputValueRef.current&&inputValueRef.current.focus()},onCancel:()=>{property?setProperty(""):value?setValue(""):setEditing(!1)}})}),valueInput=(0,jsx_runtime.jsx)("span",{className:css.qH,style:{...(0,utils.hG)(theme,!theme.isLight,value),display:visible?void 0:"none",margin:"-1px 0 -1px -2px",padding:"3px 4px",border:`1px solid ${theme.g(.85)}`},children:(0,jsx_runtime.jsx)(FlexibleInput.o,{inp:el=>inputValueRef.current=el,value,typeahead:(0,utils.fo)(value),onChange:e=>setValue(e.target.value),onSubmit:handleSubmit,onCancel:()=>{value?setValue(""):inputPropertyRef.current&&inputPropertyRef.current.focus()},onTab:e=>{const ahead=(0,utils.fo)(value);ahead&&(e.preventDefault(),setValue(value+ahead))}})});return(0,jsx_runtime.jsxs)("span",{style:{display:visible?void 0:"none"},children:[keyInput,(0,jsx_runtime.jsx)("span",{className:css.ob,children:(0,jsx_runtime.jsx)("span",{children:":"})}),valueInput]})}return(0,jsx_runtime.jsxs)("span",{className:css.UU,style:{display:visible?void 0:"none"},onClick:()=>setEditing(!0),children:[(0,jsx_runtime.jsx)("span",{className:css.Sf}),(0,jsx_runtime.jsx)("span",{className:css.V0}),(0,jsx_runtime.jsx)("button",{className:css.iw+insButtonClass+css.jN,children:"+"}),(0,jsx_runtime.jsx)("span",{className:css.Md+css.WR,children:t("Add key")})]})};ObjectInsert.displayName="ObjectInsert";try{ObjectInsert.displayName="ObjectInsert",ObjectInsert.__docgenInfo={description:"",displayName:"ObjectInsert",props:{visible:{defaultValue:null,description:"",name:"visible",required:!1,type:{name:"boolean"}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"(key: string, value: string) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/inserts/ObjectInsert.tsx#ObjectInsert"]={docgenInfo:ObjectInsert.__docgenInfo,name:"ObjectInsert",path:"src/inserts/ObjectInsert.tsx#ObjectInsert"})}catch(__react_docgen_typescript_loader_error){}const JsonCrdtObjInsert=_ref=>{let{node}=_ref;const{model}=useJsonCrdt(),isFocused=(0,context_focus.rG)(id(node)),handleSubmit=react.useCallback(((key,json)=>{let value=json;try{value=JSON.parse(json)}catch{}model.api.wrap(node.node).set({[key]:value})}),[node.node]);return(0,jsx_runtime.jsx)(ObjectInsert,{visible:isFocused,onSubmit:handleSubmit})};JsonCrdtObjInsert.displayName="JsonCrdtObjInsert";try{JsonCrdtObjInsert.displayName="JsonCrdtObjInsert",JsonCrdtObjInsert.__docgenInfo={description:"",displayName:"JsonCrdtObjInsert",props:{node:{defaultValue:null,description:"",name:"node",required:!0,type:{name:"NodeRef<ObjNode<Record<string, JsonNode<unknown>>>>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ClickableJsonCrdt/nodes/JsonCrdtObjInsert.tsx#JsonCrdtObjInsert"]={docgenInfo:JsonCrdtObjInsert.__docgenInfo,name:"JsonCrdtObjInsert",path:"src/ClickableJsonCrdt/nodes/JsonCrdtObjInsert.tsx#JsonCrdtObjInsert"})}catch(__react_docgen_typescript_loader_error){}const JsonCrdtObjNode=_ref=>{let{node}=_ref;const{render}=useJsonCrdt();(node=>{const{model}=useJsonCrdt(),[,setCnt]=react.useState(0);react.useLayoutEffect((()=>{const events=model.api.wrap(node.node).events,listener=()=>setCnt((cnt=>cnt+1));return events.on("view",listener),()=>events.off("view",listener)}))})(node);const entries=[];return node.node.nodes(((child,key)=>{entries.push((0,jsx_runtime.jsx)("span",{className:css.jv,children:render(new NodeRef(child,node,key))},key))})),(0,jsx_runtime.jsx)(JsonCrdtRegion,{node,children:(0,jsx_runtime.jsxs)(JsonCrdtObjectLayout,{node,property:(0,jsx_runtime.jsx)(JsonCrdtProperty,{node}),collapsedView:!!entries.length&&entries.length,children:[entries,(0,jsx_runtime.jsx)(JsonCrdtObjInsert,{node})]})})};JsonCrdtObjNode.displayName="JsonCrdtObjNode";try{JsonCrdtObjNode.displayName="JsonCrdtObjNode",JsonCrdtObjNode.__docgenInfo={description:"",displayName:"JsonCrdtObjNode",props:{node:{defaultValue:null,description:"",name:"node",required:!0,type:{name:"NodeRef<ObjNode<Record<string, JsonNode<unknown>>>>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ClickableJsonCrdt/nodes/JsonCrdtObjNode.tsx#JsonCrdtObjNode"]={docgenInfo:JsonCrdtObjNode.__docgenInfo,name:"JsonCrdtObjNode",path:"src/ClickableJsonCrdt/nodes/JsonCrdtObjNode.tsx#JsonCrdtObjNode"})}catch(__react_docgen_typescript_loader_error){}const JsonCrdtVecNode=_ref=>{let{node}=_ref;const{render}=useJsonCrdt(),entries=[];let i=0;return node.node.children((child=>{entries.push((0,jsx_runtime.jsx)("span",{className:css.jv,children:render(new NodeRef(child,node,String(i)))},child.id.sid+"."+child.id.time)),i++})),(0,jsx_runtime.jsx)(JsonCrdtRegion,{node,children:(0,jsx_runtime.jsx)(JsonCrdtObjectLayout,{node,property:(0,jsx_runtime.jsx)(JsonCrdtProperty,{node}),collapsedView:!!entries.length&&entries.length,brackets:["[","]"],header:(0,jsx_runtime.jsx)("span",{style:{opacity:.5,display:"inline-block",margin:"0.25em 0 0 -0.3em"},children:"→"}),children:entries})})};JsonCrdtVecNode.displayName="JsonCrdtVecNode";try{JsonCrdtVecNode.displayName="JsonCrdtVecNode",JsonCrdtVecNode.__docgenInfo={description:"",displayName:"JsonCrdtVecNode",props:{node:{defaultValue:null,description:"",name:"node",required:!0,type:{name:"NodeRef<VecNode<JsonNode<unknown>[]>>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ClickableJsonCrdt/nodes/JsonCrdtVecNode.tsx#JsonCrdtVecNode"]={docgenInfo:JsonCrdtVecNode.__docgenInfo,name:"JsonCrdtVecNode",path:"src/ClickableJsonCrdt/nodes/JsonCrdtVecNode.tsx#JsonCrdtVecNode"})}catch(__react_docgen_typescript_loader_error){}const JsonCrdtArrNode=_ref=>{let{node}=_ref;const{render}=useJsonCrdt(),entries=[];let i=0;return node.node.children((child=>{entries.push((0,jsx_runtime.jsx)("span",{className:css.jv,children:render(new NodeRef(child,node,String(i)))},child.id.sid+"."+child.id.time)),i++})),(0,jsx_runtime.jsx)(JsonCrdtRegion,{node,children:(0,jsx_runtime.jsx)(JsonCrdtObjectLayout,{node,property:(0,jsx_runtime.jsx)(JsonCrdtProperty,{node}),collapsedView:!!entries.length&&entries.length,brackets:["[","]"],children:entries})})};JsonCrdtArrNode.displayName="JsonCrdtArrNode";try{JsonCrdtArrNode.displayName="JsonCrdtArrNode",JsonCrdtArrNode.__docgenInfo={description:"",displayName:"JsonCrdtArrNode",props:{node:{defaultValue:null,description:"",name:"node",required:!0,type:{name:"NodeRef<ArrNode<JsonNode<unknown>>>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ClickableJsonCrdt/nodes/JsonCrdtArrNode.tsx#JsonCrdtArrNode"]={docgenInfo:JsonCrdtArrNode.__docgenInfo,name:"JsonCrdtArrNode",path:"src/ClickableJsonCrdt/nodes/JsonCrdtArrNode.tsx#JsonCrdtArrNode"})}catch(__react_docgen_typescript_loader_error){}const JsonCrdtStrNode=_ref=>{let{node}=_ref;const{formal}=(0,style.y)();return(0,jsx_runtime.jsxs)(JsonCrdtRegion,{node,children:[(0,jsx_runtime.jsx)(JsonCrdtProperty,{node}),(0,jsx_runtime.jsx)(JsonAtom.c,{value:node.node.view()}),!!formal&&","]})};JsonCrdtStrNode.displayName="JsonCrdtStrNode";try{JsonCrdtStrNode.displayName="JsonCrdtStrNode",JsonCrdtStrNode.__docgenInfo={description:"",displayName:"JsonCrdtStrNode",props:{node:{defaultValue:null,description:"",name:"node",required:!0,type:{name:"NodeRef<StrNode<string>>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ClickableJsonCrdt/nodes/JsonCrdtStrNode.tsx#JsonCrdtStrNode"]={docgenInfo:JsonCrdtStrNode.__docgenInfo,name:"JsonCrdtStrNode",path:"src/ClickableJsonCrdt/nodes/JsonCrdtStrNode.tsx#JsonCrdtStrNode"})}catch(__react_docgen_typescript_loader_error){}const JsonCrdtBinNode=_ref=>{let{node}=_ref;const{formal}=(0,style.y)();return(0,jsx_runtime.jsxs)(JsonCrdtRegion,{node,children:[(0,jsx_runtime.jsx)(JsonCrdtProperty,{node}),(0,jsx_runtime.jsx)(JsonAtom.c,{value:node.node.view()}),!!formal&&","]})};JsonCrdtBinNode.displayName="JsonCrdtBinNode";try{JsonCrdtBinNode.displayName="JsonCrdtBinNode",JsonCrdtBinNode.__docgenInfo={description:"",displayName:"JsonCrdtBinNode",props:{node:{defaultValue:null,description:"",name:"node",required:!0,type:{name:"NodeRef<BinNode>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ClickableJsonCrdt/nodes/JsonCrdtBinNode.tsx#JsonCrdtBinNode"]={docgenInfo:JsonCrdtBinNode.__docgenInfo,name:"JsonCrdtBinNode",path:"src/ClickableJsonCrdt/nodes/JsonCrdtBinNode.tsx#JsonCrdtBinNode"})}catch(__react_docgen_typescript_loader_error){}const render=node=>node.node instanceof json_crdt.ConNode?(0,jsx_runtime.jsx)(JsonCrdtConNode,{node}):node.node instanceof json_crdt.ValNode?(0,jsx_runtime.jsx)(JsonCrdtValNode,{node}):node.node instanceof json_crdt.ObjNode?(0,jsx_runtime.jsx)(JsonCrdtObjNode,{node}):node.node instanceof json_crdt.StrNode?(0,jsx_runtime.jsx)(JsonCrdtStrNode,{node}):node.node instanceof json_crdt.VecNode?(0,jsx_runtime.jsx)(JsonCrdtVecNode,{node}):node.node instanceof json_crdt.ArrNode?(0,jsx_runtime.jsx)(JsonCrdtArrNode,{node}):node.node instanceof json_crdt.BinNode?(0,jsx_runtime.jsx)(JsonCrdtBinNode,{node}):"∅",ClickableJsonCrdt=props=>{const{model,compact,readonly,showRoot}=props,node=react.useMemo((()=>new NodeRef(showRoot?model.root:model.root.node(),null,"")),[model]);return(0,jsx_runtime.jsx)(style.D.Provider,{value:{compact,readonly},children:(0,jsx_runtime.jsx)(context.Provider,{value:{model,render},children:(0,jsx_runtime.jsx)(context_focus.eQ,{children:(0,jsx_runtime.jsx)(Root.f,{children:render(node)})})})})};ClickableJsonCrdt.displayName="ClickableJsonCrdt";try{ClickableJsonCrdt.displayName="ClickableJsonCrdt",ClickableJsonCrdt.__docgenInfo={description:"",displayName:"ClickableJsonCrdt",props:{model:{defaultValue:null,description:"The JSON CRDT model to display.",name:"model",required:!0,type:{name:"Model<JsonNode<unknown>>"}},showRoot:{defaultValue:null,description:"Whether to display the root node.",name:"showRoot",required:!1,type:{name:"boolean"}},readonly:{defaultValue:{value:"false"},description:"If true, the JSON is not editable. Useful for displaying JSON.",name:"readonly",required:!1,type:{name:"boolean"}},formal:{defaultValue:{value:"false"},description:"Print the JSON in a more formal way. Adds quotes to keys and string values.\nAdds commas after each property.\n\nWorks only in readonly mode.",name:"formal",required:!1,type:{name:"boolean"}},keepOrder:{defaultValue:{value:"false"},description:"Keep the order of properties in objects. By default the properties are\nsorted alphabetically.",name:"keepOrder",required:!1,type:{name:"boolean"}},fontSize:{defaultValue:{value:"13.4px"},description:"Font size of the JSON.",name:"fontSize",required:!1,type:{name:"string"}},compact:{defaultValue:{value:"false"},description:"If true, the JSON is printed in a compact way. Reduces spacing between\nelements.",name:"compact",required:!1,type:{name:"boolean"}},collapsed:{defaultValue:{value:"false"},description:"If true, the JSON starts collapsed, but can be expanded by clicking on it.",name:"collapsed",required:!1,type:{name:"boolean"}},noCollapseToggles:{defaultValue:{value:"false"},description:"Whether to show +/- buttons to expand/collapse objects and arrays.",name:"noCollapseToggles",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ClickableJsonCrdt/index.tsx#ClickableJsonCrdt"]={docgenInfo:ClickableJsonCrdt.__docgenInfo,name:"ClickableJsonCrdt",path:"src/ClickableJsonCrdt/index.tsx#ClickableJsonCrdt"})}catch(__react_docgen_typescript_loader_error){}var json_crdt_patch=__webpack_require__("./node_modules/json-joy/es2020/json-crdt-patch/index.js");const index_stories={title:"ClickableJsonCrdt",component:ClickableJsonCrdt,parameters:{layout:"centered"},tags:["autodocs"],argTypes:{}},model=json_crdt.Model.withLogicalClock();model.api.root({foo:json_crdt_patch.s.con([123,[null]]),bar:!0,baz:{x:1,val:json_crdt_patch.s.val(json_crdt_patch.s.con(!0))},emptyObject:{},qux:json_crdt_patch.s.vec(json_crdt_patch.s.con(1),json_crdt_patch.s.con(-2),json_crdt_patch.s.con("three"),json_crdt_patch.s.con({four:4})),arr:[json_crdt_patch.s.con(0),"hello world",-5,json_crdt_patch.s.val(json_crdt_patch.s.val(json_crdt_patch.s.con(null))),json_crdt_patch.s.val(json_crdt_patch.s.con({foo:"bar"}))],bin:json_crdt_patch.s.bin(new Uint8Array([1,2,3,4,5]))}),console.log(model+"");const Primary={render:()=>(0,jsx_runtime.jsx)("div",{style:{padding:"32px 64px"},children:(0,jsx_runtime.jsx)(ClickableJsonCrdt,{model})}),parameters:{layout:"fullscreen"}},ShowRoot={render:()=>(0,jsx_runtime.jsx)("div",{style:{padding:"32px 64px"},children:(0,jsx_runtime.jsx)(ClickableJsonCrdt,{showRoot:!0,model})}),parameters:{layout:"fullscreen"}},Demo=_ref=>{let{view,...rest}=_ref;const model=react.useMemo((()=>{const model=json_crdt.Model.withLogicalClock();return void 0!==view&&model.api.root(view),model}),[]);return(0,jsx_runtime.jsx)("div",{style:{padding:"32px 64px"},children:(0,jsx_runtime.jsx)(ClickableJsonCrdt,{...rest,model})})};Demo.displayName="Demo";const EmptyDoc={render:()=>(0,jsx_runtime.jsx)(Demo,{}),parameters:{layout:"fullscreen"}},ConstantRoot={render:()=>(0,jsx_runtime.jsx)(Demo,{view:json_crdt_patch.s.con(123456789)}),parameters:{layout:"fullscreen"}},ConstantRootJson={render:()=>(0,jsx_runtime.jsx)(Demo,{view:json_crdt_patch.s.con({foo:[123,"bar"]})}),parameters:{layout:"fullscreen"}};Primary.parameters={...Primary.parameters,docs:{...Primary.parameters?.docs,source:{originalSource:"{\n  render: () => <div style={{\n    padding: '32px 64px'\n  }}>\n      <ClickableJsonCrdt model={model} />\n    </div>,\n  parameters: {\n    layout: 'fullscreen'\n  }\n}",...Primary.parameters?.docs?.source}}},ShowRoot.parameters={...ShowRoot.parameters,docs:{...ShowRoot.parameters?.docs,source:{originalSource:"{\n  render: () => <div style={{\n    padding: '32px 64px'\n  }}>\n      <ClickableJsonCrdt showRoot model={model} />\n    </div>,\n  parameters: {\n    layout: 'fullscreen'\n  }\n}",...ShowRoot.parameters?.docs?.source}}},EmptyDoc.parameters={...EmptyDoc.parameters,docs:{...EmptyDoc.parameters?.docs,source:{originalSource:"{\n  render: () => <Demo />,\n  parameters: {\n    layout: 'fullscreen'\n  }\n}",...EmptyDoc.parameters?.docs?.source}}},ConstantRoot.parameters={...ConstantRoot.parameters,docs:{...ConstantRoot.parameters?.docs,source:{originalSource:"{\n  render: () => <Demo view={s.con(123456789)} />,\n  parameters: {\n    layout: 'fullscreen'\n  }\n}",...ConstantRoot.parameters?.docs?.source}}},ConstantRootJson.parameters={...ConstantRootJson.parameters,docs:{...ConstantRootJson.parameters?.docs,source:{originalSource:"{\n  render: () => <Demo view={s.con({\n    foo: [123, 'bar']\n  })} />,\n  parameters: {\n    layout: 'fullscreen'\n  }\n}",...ConstantRootJson.parameters?.docs?.source}}};const __namedExportsOrder=["Primary","ShowRoot","EmptyDoc","ConstantRoot","ConstantRootJson"]}}]);