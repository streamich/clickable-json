"use strict";(self.webpackChunkclickable_json=self.webpackChunkclickable_json||[]).push([[527],{"./src/ClickableJsonCrdt/index.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ConstantRoot:()=>ConstantRoot,ConstantRootJson:()=>ConstantRootJson,EmptyDoc:()=>EmptyDoc,InteractiveLarge:()=>InteractiveLarge,LongValues:()=>LongValues,MultivalueRegisterExtension:()=>MultivalueRegisterExtension,PeritextExtension:()=>PeritextExtension,Primary:()=>Primary,QuillExtension:()=>QuillExtension,Readonly:()=>Readonly,Reset:()=>Reset,ShowRoot:()=>ShowRoot,VectorNode:()=>VectorNode,__namedExportsOrder:()=>__namedExportsOrder,default:()=>index_stories});var react=__webpack_require__("./node_modules/react/index.js");const context=react.createContext(null),useJsonCrdt=()=>react.useContext(context);var style=__webpack_require__("./src/context/style.ts");class NodeRef{constructor(node,parent,step){this.node=node,this.parent=parent,this.step=step}}const map=new WeakMap,nodeRef=(node,parent,step)=>{try{const ref=map.get(node);if(ref)return ref;const newRef=new NodeRef(node,parent,step);return map.set(node,newRef),newRef}catch{return}};var Root=__webpack_require__("./src/Root/index.tsx"),context_focus=__webpack_require__("./src/context/focus.tsx"),json_crdt=__webpack_require__("./node_modules/json-joy/lib/json-crdt/index.js"),lib=__webpack_require__("./node_modules/nano-theme/lib/index.js"),css=__webpack_require__("./src/css.ts");const PropertyLayout=_ref=>{let{property,formal,focused}=_ref;const theme=(0,lib.useTheme)(),style={color:theme.g(.1)};return focused&&(style.background=theme.bg,style.border=`1px solid ${theme.g(.9)}`,style.fontWeight="bold",style.margin="-3px",style.padding="2px"),property&&-1===property.indexOf(" ")||(style.background=theme.blue(.1)),react.createElement(react.Fragment,null,react.createElement("span",{className:css.MZ,style},formal?JSON.stringify(property):property),react.createElement("span",{className:css.kx,style:{color:theme.g(.5)}},react.createElement("span",null,":")))};try{PropertyLayout.displayName="PropertyLayout",PropertyLayout.__docgenInfo={description:"",displayName:"PropertyLayout",props:{property:{defaultValue:null,description:"",name:"property",required:!0,type:{name:"string"}},formal:{defaultValue:null,description:"",name:"formal",required:!1,type:{name:"boolean"}},focused:{defaultValue:null,description:"",name:"focused",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/PropertyLayout/index.tsx#PropertyLayout"]={docgenInfo:PropertyLayout.__docgenInfo,name:"PropertyLayout",path:"src/PropertyLayout/index.tsx#PropertyLayout"})}catch(__react_docgen_typescript_loader_error){}const JsonCrdtProperty=_ref=>{let{node}=_ref;return node.parent&&"obj"===node.parent.node.name()?react.createElement(PropertyLayout,{property:node.step}):null};try{JsonCrdtProperty.displayName="JsonCrdtProperty",JsonCrdtProperty.__docgenInfo={description:"",displayName:"JsonCrdtProperty",props:{node:{defaultValue:null,description:"",name:"node",required:!0,type:{name:"NodeRef<JsonNode<unknown>>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ClickableJsonCrdt/JsonCrdtProperty.tsx#JsonCrdtProperty"]={docgenInfo:JsonCrdtProperty.__docgenInfo,name:"JsonCrdtProperty",path:"src/ClickableJsonCrdt/JsonCrdtProperty.tsx#JsonCrdtProperty"})}catch(__react_docgen_typescript_loader_error){}var FocusRegion=__webpack_require__("./src/FocusRegion/index.tsx");const blockClass=(0,lib.rule)({...lib.theme.font.mono,fz:"10px",lh:"9px",us:"none",pe:"none"}),TypeAndId=react.memo(_ref=>{let{node,active,negative,extension}=_ref;const theme=(0,lib.useTheme)(),crdtNode=node.node;let type=crdtNode.name();extension&&crdtNode instanceof json_crdt.VecNode&&crdtNode.isExt()&&(type=react.createElement("span",{style:{whiteSpace:"nowrap"}},"ext ",react.createElement("span",{style:{color:theme.color.sem.brand[1]}},crdtNode.ext().name())));const{sid,time}=crdtNode.id;return react.createElement("span",{className:blockClass,style:{color:active?negative?theme.color.sem.negative[0]:theme.color.sem.blue[0]:theme.g(0,.5)}},type,react.createElement("span",{style:{color:active?theme.g(0,.45):theme.g(0,.2),display:"block"}},active?(sid>999?"...":"")+String(sid).slice(String(sid).length-4):null,react.createElement("span",{style:{color:active?theme.g(0,.7):theme.g(0,.3)}},"."+time)))});try{TypeAndId.displayName="TypeAndId",TypeAndId.__docgenInfo={description:"",displayName:"TypeAndId",props:{node:{defaultValue:null,description:"",name:"node",required:!0,type:{name:"NodeRef<any>"}},active:{defaultValue:null,description:"",name:"active",required:!1,type:{name:"boolean"}},negative:{defaultValue:null,description:"",name:"negative",required:!1,type:{name:"boolean"}},extension:{defaultValue:null,description:"",name:"extension",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ClickableJsonCrdt/TypeAndId.tsx#TypeAndId"]={docgenInfo:TypeAndId.__docgenInfo,name:"TypeAndId",path:"src/ClickableJsonCrdt/TypeAndId.tsx#TypeAndId"})}catch(__react_docgen_typescript_loader_error){}const id=node=>{const id=node.node.id;return id.sid+"."+id.time},createValue=(model,json,type,constOrJson)=>{let value=json;try{value=JSON.parse(json)}catch{}const api=model.api,builder=api.builder,valueId="any"===type?constOrJson?builder.constOrJson(value):builder.json(value):"con"===type?api.builder.const(value):"vec"===type?api.builder.vec():"val"===type?api.builder.val():api.builder.const(void 0);if("vec"===type){if(json){const valueVec=Array.isArray(value)?value:[value];builder.insVec(valueId,valueVec.map((x,i)=>[i,api.builder.maybeConst(x)]))}}else"val"===type&&builder.setVal(valueId,json?api.builder.maybeConst(value):api.builder.const(void 0));return valueId};var ValueInput=__webpack_require__("./src/inserts/ValueInput.tsx"),CancelAction=__webpack_require__("./src/buttons/Action/CancelAction.tsx");const JsonCrdtRegionEdit=_ref=>{let{node,onCancel}=_ref;const{compact}=(0,style.I)(),{model}=useJsonCrdt(),view=node.node.view(),value=(value=>!!value&&"object"==typeof value)(view)?"":JSON.stringify(view);return react.createElement(FocusRegion.B,{compact},react.createElement(JsonCrdtProperty,{node}),react.createElement("span",{style:{display:"inline-block",margin:"-3px 0",position:"relative"}},react.createElement(ValueInput.m,{focus:!0,withType:!0,visible:!0,initialType:"con"===node.node.name()&&void 0!==node.node.view()?"con":"any",initialValue:value,onSubmit:(json,type)=>{const parent=node.parent;if(parent&&"obj"===parent.node.name()){const valueId=createValue(model,json,type,!0);model.api.wrap(parent.node).set({[node.step]:valueId})}else if(!parent||"val"!==parent.node.name()&&"root"!==parent.node.name()){if(parent&&"vec"===parent.node.name()){const valueId=createValue(model,json,type,!0);model.api.wrap(parent.node).set([[+node.step,valueId]])}}else{const valueId=createValue(model,json,type,!0);model.api.wrap(parent.node).set(valueId)}onCancel&&onCancel()},onCancel}),!!onCancel&&react.createElement(CancelAction.T,{onClick:()=>onCancel()})))};try{JsonCrdtRegionEdit.displayName="JsonCrdtRegionEdit",JsonCrdtRegionEdit.__docgenInfo={description:"",displayName:"JsonCrdtRegionEdit",props:{node:{defaultValue:null,description:"",name:"node",required:!0,type:{name:"NodeRef<JsonNode<unknown>>"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!1,type:{name:"(() => void)"}},property:{defaultValue:null,description:"",name:"property",required:!1,type:{name:"ReactNode"}},collapsedView:{defaultValue:null,description:"",name:"collapsedView",required:!1,type:{name:"ReactNode"}},header:{defaultValue:null,description:"",name:"header",required:!1,type:{name:"ReactNode"}},collapsed:{defaultValue:null,description:"",name:"collapsed",required:!1,type:{name:"boolean"}},comma:{defaultValue:null,description:"",name:"comma",required:!1,type:{name:"boolean"}},brackets:{defaultValue:null,description:"",name:"brackets",required:!1,type:{name:"[opening: string, closing: string]"}},manageCollapse:{defaultValue:null,description:"",name:"manageCollapse",required:!1,type:{name:"boolean"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"MouseEventHandler<Element>"}},onCollapserClick:{defaultValue:null,description:"",name:"onCollapserClick",required:!1,type:{name:"MouseEventHandler<Element>"}},onCollapsedClick:{defaultValue:null,description:"",name:"onCollapsedClick",required:!1,type:{name:"MouseEventHandler<Element>"}},onBracketClick:{defaultValue:null,description:"",name:"onBracketClick",required:!1,type:{name:"(() => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ClickableJsonCrdt/JsonCrdtRegionEdit.tsx#JsonCrdtRegionEdit"]={docgenInfo:JsonCrdtRegionEdit.__docgenInfo,name:"JsonCrdtRegionEdit",path:"src/ClickableJsonCrdt/JsonCrdtRegionEdit.tsx#JsonCrdtRegionEdit"})}catch(__react_docgen_typescript_loader_error){}const JsonCrdtRegion=_ref=>{let{node,editing,extension,toolbar,children}=_ref;const{model}=useJsonCrdt(),{compact,readonly}=(0,style.I)(),{focused,focus,pointed,point}=(0,context_focus.iQ)(),nodeId=id(node),[edit,setEdit]=react.useState(!1),isFocused=focused===nodeId,isPointed=pointed===nodeId,parentNodeType=node.parent?.node.name(),isTombstone=(node=>!!node.parent&&"con"===node.node.name()&&void 0===node.node.val)(node),parentIsObj="obj"===parentNodeType,parentIsArr="arr"===parentNodeType,parentIsVec="vec"===parentNodeType,aside=isFocused?react.createElement("span",{style:{display:"inline-block",margin:"-4px 0 0"}},react.createElement(TypeAndId,{node,active:isFocused,negative:isTombstone,extension})):void 0;return edit?react.createElement(JsonCrdtRegionEdit,{node,onCancel:()=>setEdit(!1)}):react.createElement(FocusRegion.B,{pointed:isPointed,focused:isFocused,compact,negative:isTombstone,aside,toolbar,onClick:e=>{e.preventDefault(),e.stopPropagation(),focus(nodeId)},onMouseMove:e=>{e.stopPropagation(),pointed!==nodeId&&point(nodeId)},onMouseEnter:e=>{e.preventDefault(),e.stopPropagation(),point(nodeId)},onMouseLeave:()=>{point("")},onDelete:editing||readonly||!isFocused||isTombstone?void 0:parentIsObj?()=>{model.api.wrap(node.parent.node).del([node.step])}:parentIsArr?()=>{model.api.wrap(node.parent.node).del(+node.step,1)}:parentIsVec?()=>{model.api.wrap(node.parent.node).set([[+node.step,void 0]])}:"val"!==parentNodeType||isTombstone?void 0:()=>{model.api.wrap(node.parent.node).set(void 0)},onEdit:editing||readonly||!isFocused||"obj"!==parentNodeType&&"val"!==parentNodeType&&"root"!==parentNodeType&&"vec"!==parentNodeType?void 0:()=>setEdit(!0)},children)};try{JsonCrdtRegion.displayName="JsonCrdtRegion",JsonCrdtRegion.__docgenInfo={description:"",displayName:"JsonCrdtRegion",props:{node:{defaultValue:null,description:"",name:"node",required:!0,type:{name:"NodeRef<any>"}},editing:{defaultValue:null,description:"",name:"editing",required:!1,type:{name:"boolean"}},aside:{defaultValue:null,description:"",name:"aside",required:!1,type:{name:"ReactNode"}},toolbar:{defaultValue:null,description:"",name:"toolbar",required:!1,type:{name:"ReactNode"}},extension:{defaultValue:null,description:"",name:"extension",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ClickableJsonCrdt/JsonCrdtRegion.tsx#JsonCrdtRegion"]={docgenInfo:JsonCrdtRegion.__docgenInfo,name:"JsonCrdtRegion",path:"src/ClickableJsonCrdt/JsonCrdtRegion.tsx#JsonCrdtRegion"})}catch(__react_docgen_typescript_loader_error){}var JsonAtom=__webpack_require__("./src/JsonAtom/index.tsx"),ClickableJson=__webpack_require__("./src/ClickableJson/index.tsx");const JsonCrdtConstant=_ref=>{let{id,view}=_ref;const{focus}=(0,context_focus.iQ)(),[viewJson,setViewJson]=react.useState(!1),handleAtomClick=()=>{view&&"object"==typeof view&&setViewJson(!viewJson)};return viewJson?react.createElement("span",{style:{display:"inline-block",verticalAlign:"top",margin:"-1px"}},react.createElement(ClickableJson.X,{readonly:!0,compact:!0,noCollapseToggles:!0,pfx:id,doc:view,onFocus:p=>{null!==p&&focus(id)}})):react.createElement(JsonAtom.y,{value:view,onClick:handleAtomClick})};try{JsonCrdtConstant.displayName="JsonCrdtConstant",JsonCrdtConstant.__docgenInfo={description:"",displayName:"JsonCrdtConstant",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},view:{defaultValue:null,description:"",name:"view",required:!0,type:{name:"unknown"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ClickableJsonCrdt/JsonCrdtConstant.tsx#JsonCrdtConstant"]={docgenInfo:JsonCrdtConstant.__docgenInfo,name:"JsonCrdtConstant",path:"src/ClickableJsonCrdt/JsonCrdtConstant.tsx#JsonCrdtConstant"})}catch(__react_docgen_typescript_loader_error){}const JsonCrdtConNode=_ref=>{let{node}=_ref;const{formal}=(0,style.I)();return react.createElement(JsonCrdtRegion,{node},react.createElement(JsonCrdtProperty,{node}),react.createElement(JsonCrdtConstant,{id:id(node),view:node.node.view()}),!!formal&&",")};try{JsonCrdtConNode.displayName="JsonCrdtConNode",JsonCrdtConNode.__docgenInfo={description:"",displayName:"JsonCrdtConNode",props:{node:{defaultValue:null,description:"",name:"node",required:!0,type:{name:"NodeRef<ConNode<unknown>>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ClickableJsonCrdt/nodes/JsonCrdtConNode.tsx#JsonCrdtConNode"]={docgenInfo:JsonCrdtConNode.__docgenInfo,name:"JsonCrdtConNode",path:"src/ClickableJsonCrdt/nodes/JsonCrdtConNode.tsx#JsonCrdtConNode"})}catch(__react_docgen_typescript_loader_error){}var ObjectLayout=__webpack_require__("./src/ObjectLayout/index.tsx");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const JsonCrdtObjectLayout=_ref=>{let{node,...rest}=_ref;const{collapsed:startsCollapsed}=(0,style.I)(),{focused}=(0,context_focus.iQ)(),[collapsed,setCollapsed]=react.useState(startsCollapsed);return react.createElement(ObjectLayout.M,_extends({collapsed,onCollapserClick:()=>setCollapsed(!collapsed),onBracketClick:()=>{collapsed||id(node)!==focused||setCollapsed(!0)},onCollapsedClick:()=>{collapsed&&setCollapsed(!1)}},rest))};try{JsonCrdtObjectLayout.displayName="JsonCrdtObjectLayout",JsonCrdtObjectLayout.__docgenInfo={description:"",displayName:"JsonCrdtObjectLayout",props:{node:{defaultValue:null,description:"",name:"node",required:!0,type:{name:"NodeRef<JsonNode<unknown>>"}},property:{defaultValue:null,description:"",name:"property",required:!1,type:{name:"ReactNode"}},collapsedView:{defaultValue:null,description:"",name:"collapsedView",required:!1,type:{name:"ReactNode"}},header:{defaultValue:null,description:"",name:"header",required:!1,type:{name:"ReactNode"}},collapsed:{defaultValue:null,description:"",name:"collapsed",required:!1,type:{name:"boolean"}},comma:{defaultValue:null,description:"",name:"comma",required:!1,type:{name:"boolean"}},brackets:{defaultValue:null,description:"",name:"brackets",required:!1,type:{name:"[opening: string, closing: string]"}},manageCollapse:{defaultValue:null,description:"",name:"manageCollapse",required:!1,type:{name:"boolean"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"MouseEventHandler<Element>"}},onCollapserClick:{defaultValue:null,description:"",name:"onCollapserClick",required:!1,type:{name:"MouseEventHandler<Element>"}},onCollapsedClick:{defaultValue:null,description:"",name:"onCollapsedClick",required:!1,type:{name:"MouseEventHandler<Element>"}},onBracketClick:{defaultValue:null,description:"",name:"onBracketClick",required:!1,type:{name:"(() => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ClickableJsonCrdt/JsonCrdtObjectLayout.tsx#JsonCrdtObjectLayout"]={docgenInfo:JsonCrdtObjectLayout.__docgenInfo,name:"JsonCrdtObjectLayout",path:"src/ClickableJsonCrdt/JsonCrdtObjectLayout.tsx#JsonCrdtObjectLayout"})}catch(__react_docgen_typescript_loader_error){}const useRerender=node=>{const events=(node=>{const{model}=useJsonCrdt();return model.api.wrap(node.node)})(node).events;return react.useSyncExternalStore(events.subscribe,events.getSnapshot)},useRerenderModel=()=>{const{model}=useJsonCrdt(),api=model.api;react.useSyncExternalStore(api.subscribe,()=>model.tick)},JsonCrdtValNode=_ref=>{let{node}=_ref;const{render}=useJsonCrdt();useRerenderModel();const childNode=node.node.node();if(!childNode)return null;const childNodeRef=nodeRef(childNode,node,"");if(!childNodeRef)return null;const child=react.createElement("span",{className:css.n8},render(childNodeRef));let collapsedView="…";if("con"===childNode.name()){const view=childNode.view();collapsedView=react.createElement(JsonAtom.y,{value:view})}return react.createElement(JsonCrdtRegion,{node},react.createElement(JsonCrdtObjectLayout,{node,property:react.createElement(JsonCrdtProperty,{node}),collapsedView,brackets:["(",")"]},child))};try{JsonCrdtValNode.displayName="JsonCrdtValNode",JsonCrdtValNode.__docgenInfo={description:"",displayName:"JsonCrdtValNode",props:{node:{defaultValue:null,description:"",name:"node",required:!0,type:{name:"NodeRef<ValNode<JsonNode<unknown>>>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ClickableJsonCrdt/nodes/JsonCrdtValNode.tsx#JsonCrdtValNode"]={docgenInfo:JsonCrdtValNode.__docgenInfo,name:"JsonCrdtValNode",path:"src/ClickableJsonCrdt/nodes/JsonCrdtValNode.tsx#JsonCrdtValNode"})}catch(__react_docgen_typescript_loader_error){}var ObjectInsert=__webpack_require__("./src/inserts/ObjectInsert.tsx");const AddKey=_ref=>{let{node}=_ref;const{model}=useJsonCrdt(),isFocused=(0,context_focus.jH)(id(node)),handleSubmit=react.useCallback((key,json,type)=>{const valueId=createValue(model,json,type,!0);model.api.wrap(node.node).set({[key]:valueId})},[node.node]);return react.createElement(ObjectInsert.D,{withType:!0,visible:isFocused,onSubmit:handleSubmit})};try{AddKey.displayName="AddKey",AddKey.__docgenInfo={description:"",displayName:"AddKey",props:{node:{defaultValue:null,description:"",name:"node",required:!0,type:{name:"NodeRef<ObjNode<Record<string, JsonNode<unknown>>>>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ClickableJsonCrdt/nodes/JsonCrdtObjNode/AddKey.tsx#AddKey"]={docgenInfo:AddKey.__docgenInfo,name:"AddKey",path:"src/ClickableJsonCrdt/nodes/JsonCrdtObjNode/AddKey.tsx#AddKey"})}catch(__react_docgen_typescript_loader_error){}var use_t_lib=__webpack_require__("./node_modules/use-t/lib/index.js"),MiniTitle=__webpack_require__("./node_modules/nice-ui/lib/3-list-item/MiniTitle/index.js");const Tombstones_blockClass=(0,lib.rule)({d:"block",bxz:"border-box",pd:"0 4px 4px 16px",bdrad:"8px",mr:"4px 0 0 -16px",w:"calc(100% + 16px)",bg:lib.theme.red(.05)}),titleClass=(0,lib.rule)({d:"block",w:"100%",bxz:"border-box",pd:"4px 8px 3px 3px",cur:"default",us:"none"}),Tombstones=_ref=>{let{tombstones}=_ref;const[showTombstones,setShowTombstones]=react.useState(!1),[t]=(0,use_t_lib.useT)();return tombstones.length?react.createElement("span",{className:Tombstones_blockClass},react.createElement("style",{className:titleClass,onClick:()=>setShowTombstones(x=>!x)},react.createElement(MiniTitle.k,{style:{fontSize:"0.65em",color:lib.theme.red(.75)}},tombstones.length+" "+(1===tombstones.length?t("tombstone"):t("tombstones")))),showTombstones&&tombstones):null};try{Tombstones.displayName="Tombstones",Tombstones.__docgenInfo={description:"",displayName:"Tombstones",props:{tombstones:{defaultValue:null,description:"",name:"tombstones",required:!0,type:{name:"ReactNode[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ClickableJsonCrdt/nodes/JsonCrdtObjNode/Tombstones.tsx#Tombstones"]={docgenInfo:Tombstones.__docgenInfo,name:"Tombstones",path:"src/ClickableJsonCrdt/nodes/JsonCrdtObjNode/Tombstones.tsx#Tombstones"})}catch(__react_docgen_typescript_loader_error){}const JsonCrdtObjNode=_ref=>{let{node}=_ref;const{readonly}=(0,style.I)(),{render}=useJsonCrdt();useRerender(node);const entries=[],tombstones=[];return node.node.nodes((child,key)=>{if(!child)return;const childRef=nodeRef(child,node,key);if(!childRef)return;const element=react.createElement("span",{key,className:css.n8},render(childRef));(node=>node instanceof json_crdt.ConNode&&void 0===node.val)(child)?tombstones.push(element):entries.push(element)}),react.createElement(JsonCrdtRegion,{node},react.createElement(JsonCrdtObjectLayout,{node,property:react.createElement(JsonCrdtProperty,{node}),collapsedView:!!entries.length&&entries.length},entries,!readonly&&react.createElement(AddKey,{node}),!!tombstones.length&&react.createElement(Tombstones,{tombstones})))};try{JsonCrdtObjNode.displayName="JsonCrdtObjNode",JsonCrdtObjNode.__docgenInfo={description:"",displayName:"JsonCrdtObjNode",props:{node:{defaultValue:null,description:"",name:"node",required:!0,type:{name:"NodeRef<ObjNode<Record<string, JsonNode<unknown>>>>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ClickableJsonCrdt/nodes/JsonCrdtObjNode/index.tsx#JsonCrdtObjNode"]={docgenInfo:JsonCrdtObjNode.__docgenInfo,name:"JsonCrdtObjNode",path:"src/ClickableJsonCrdt/nodes/JsonCrdtObjNode/index.tsx#JsonCrdtObjNode"})}catch(__react_docgen_typescript_loader_error){}var ArrayInsert=__webpack_require__("./src/inserts/ArrayInsert.tsx");const PushElement=_ref=>{let{node}=_ref;const{model}=useJsonCrdt(),isFocused=(0,context_focus.jH)(id(node)),handleSubmit=react.useCallback((json,type)=>{const valueId=createValue(model,json,type,!0),nodeApi=model.api.wrap(node.node);nodeApi.set([[nodeApi.view().length,valueId]])},[node.node]);return react.createElement(ArrayInsert.f,{withType:!0,visible:isFocused,onSubmit:handleSubmit})};try{PushElement.displayName="PushElement",PushElement.__docgenInfo={description:"",displayName:"PushElement",props:{node:{defaultValue:null,description:"",name:"node",required:!0,type:{name:"NodeRef<VecNode<JsonNode<unknown>[]>>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ClickableJsonCrdt/nodes/JsonCrdtVecNode/PushElement.tsx#PushElement"]={docgenInfo:PushElement.__docgenInfo,name:"PushElement",path:"src/ClickableJsonCrdt/nodes/JsonCrdtVecNode/PushElement.tsx#PushElement"})}catch(__react_docgen_typescript_loader_error){}var Action=__webpack_require__("./src/buttons/Action/index.tsx");function SwitchAction_extends(){return SwitchAction_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},SwitchAction_extends.apply(null,arguments)}const SwitchAction_blockClass=(0,lib.drule)({w:"20px",h:"20px",bdrad:"50%",svg:{fill:css.z1}}),SwitchAction=props=>react.createElement(Action.r,SwitchAction_extends({},props,{className:SwitchAction_blockClass()}),"~");try{SwitchAction.displayName="SwitchAction",SwitchAction.__docgenInfo={description:"",displayName:"SwitchAction",props:{onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"MouseEventHandler<Element>"}},onMouseEnter:{defaultValue:null,description:"",name:"onMouseEnter",required:!1,type:{name:"MouseEventHandler<Element>"}},onMouseLeave:{defaultValue:null,description:"",name:"onMouseLeave",required:!1,type:{name:"MouseEventHandler<Element>"}},tooltip:{defaultValue:null,description:"",name:"tooltip",required:!1,type:{name:"ReactNode"}},onMouseOver:{defaultValue:null,description:"",name:"onMouseOver",required:!1,type:{name:"MouseEventHandler<Element>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/buttons/Action/SwitchAction.tsx#SwitchAction"]={docgenInfo:SwitchAction.__docgenInfo,name:"SwitchAction",path:"src/buttons/Action/SwitchAction.tsx#SwitchAction"})}catch(__react_docgen_typescript_loader_error){}const JsonCrdtExtNode=_ref=>{let{node,onViewChange}=_ref;const[t]=(0,use_t_lib.useT)();useRerenderModel();const view=node.node.view();return react.createElement(JsonCrdtRegion,{node,extension:!0,toolbar:react.createElement(SwitchAction,{onClick:onViewChange,tooltip:t('Show "vec" node')})},react.createElement(JsonCrdtObjectLayout,{node,property:react.createElement(JsonCrdtProperty,{node}),collapsedView:react.createElement(JsonAtom.y,{value:view}),brackets:["(",")"]},react.createElement(JsonCrdtConstant,{id:id(node),view})))};try{JsonCrdtExtNode.displayName="JsonCrdtExtNode",JsonCrdtExtNode.__docgenInfo={description:"",displayName:"JsonCrdtExtNode",props:{node:{defaultValue:null,description:"",name:"node",required:!0,type:{name:"NodeRef<VecNode<JsonNode<unknown>[]>>"}},onViewChange:{defaultValue:null,description:"",name:"onViewChange",required:!1,type:{name:"(() => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ClickableJsonCrdt/nodes/JsonCrdtVecNode/JsonCrdtExtNode.tsx#JsonCrdtExtNode"]={docgenInfo:JsonCrdtExtNode.__docgenInfo,name:"JsonCrdtExtNode",path:"src/ClickableJsonCrdt/nodes/JsonCrdtVecNode/JsonCrdtExtNode.tsx#JsonCrdtExtNode"})}catch(__react_docgen_typescript_loader_error){}const JsonCrdtVecNode=_ref=>{let{node}=_ref;const[t]=(0,use_t_lib.useT)(),[renderExtAsVec,setRenderExtAsVec]=react.useState(!1),{readonly}=(0,style.I)(),{render}=useJsonCrdt();useRerenderModel();const isExtension=node.node.isExt();if(isExtension&&!renderExtAsVec)return react.createElement(JsonCrdtExtNode,{node,onViewChange:()=>setRenderExtAsVec(!0)});const entries=[];let i=0;return node.node.children(child=>{if(!child)return;const childRef=nodeRef(child,node,String(i));childRef&&(entries.push(react.createElement("span",{key:child.id.sid+"."+child.id.time,className:css.n8},render(childRef))),i++)}),react.createElement(JsonCrdtRegion,{node,toolbar:isExtension?react.createElement(SwitchAction,{onClick:()=>setRenderExtAsVec(!1),tooltip:t('Show "ext" view')}):void 0},react.createElement(JsonCrdtObjectLayout,{node,property:react.createElement(JsonCrdtProperty,{node}),collapsedView:!!entries.length&&entries.length,brackets:["[","]"],header:react.createElement("span",{style:{opacity:.5,display:"inline-block",margin:"0.25em 0 0 -0.3em"}},"→")},entries,!readonly&&react.createElement(PushElement,{node})))};try{JsonCrdtVecNode.displayName="JsonCrdtVecNode",JsonCrdtVecNode.__docgenInfo={description:"",displayName:"JsonCrdtVecNode",props:{node:{defaultValue:null,description:"",name:"node",required:!0,type:{name:"NodeRef<VecNode<JsonNode<unknown>[]>>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ClickableJsonCrdt/nodes/JsonCrdtVecNode/index.tsx#JsonCrdtVecNode"]={docgenInfo:JsonCrdtVecNode.__docgenInfo,name:"JsonCrdtVecNode",path:"src/ClickableJsonCrdt/nodes/JsonCrdtVecNode/index.tsx#JsonCrdtVecNode"})}catch(__react_docgen_typescript_loader_error){}const InsertElement=_ref=>{let{node,index}=_ref;const{model}=useJsonCrdt(),isFocused=(0,context_focus.jH)(id(node)),handleSubmit=react.useCallback((json,type)=>{const valueId=createValue(model,json,type);model.api.wrap(node.node).ins(index,[valueId])},[node.node]);return react.createElement(ArrayInsert.f,{withType:!0,visible:isFocused,onSubmit:handleSubmit})};try{InsertElement.displayName="InsertElement",InsertElement.__docgenInfo={description:"",displayName:"InsertElement",props:{node:{defaultValue:null,description:"",name:"node",required:!0,type:{name:"NodeRef<ArrNode<JsonNode<unknown>>>"}},index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ClickableJsonCrdt/nodes/JsonCrdtArrNode/InsertElement.tsx#InsertElement"]={docgenInfo:InsertElement.__docgenInfo,name:"InsertElement",path:"src/ClickableJsonCrdt/nodes/JsonCrdtArrNode/InsertElement.tsx#InsertElement"})}catch(__react_docgen_typescript_loader_error){}const JsonCrdtArrNode=_ref=>{let{node}=_ref;const{readonly}=(0,style.I)(),{render}=useJsonCrdt();useRerender(node);const entries=[];let i=0;return node.node.children(child=>{if(!child)return;const childNodeRef=nodeRef(child,node,String(i));if(!childNodeRef)return;childNodeRef.step=String(i);const key=child.id.sid+"."+child.id.time+"."+i;entries.push(react.createElement(react.Fragment,{key},!readonly&&react.createElement(InsertElement,{key,node,index:i}),react.createElement("span",{className:css.n8},render(childNodeRef)))),i++}),react.createElement(JsonCrdtRegion,{node},react.createElement(JsonCrdtObjectLayout,{node,property:react.createElement(JsonCrdtProperty,{node}),collapsedView:!!entries.length&&entries.length,brackets:["[","]"]},entries,!readonly&&react.createElement(InsertElement,{key:node.node.length(),node,index:node.node.length()})))};try{JsonCrdtArrNode.displayName="JsonCrdtArrNode",JsonCrdtArrNode.__docgenInfo={description:"",displayName:"JsonCrdtArrNode",props:{node:{defaultValue:null,description:"",name:"node",required:!0,type:{name:"NodeRef<ArrNode<JsonNode<unknown>>>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ClickableJsonCrdt/nodes/JsonCrdtArrNode/index.tsx#JsonCrdtArrNode"]={docgenInfo:JsonCrdtArrNode.__docgenInfo,name:"JsonCrdtArrNode",path:"src/ClickableJsonCrdt/nodes/JsonCrdtArrNode/index.tsx#JsonCrdtArrNode"})}catch(__react_docgen_typescript_loader_error){}var collaborative_input_lib=__webpack_require__("./node_modules/collaborative-input/lib/index.js"),flexible_input_lib=__webpack_require__("./node_modules/flexible-input/lib/index.js"),selectOnFocus=__webpack_require__("./src/utils/selectOnFocus.ts"),utils=__webpack_require__("./src/ClickableJson/utils.tsx");const SubmitAction=props=>react.createElement(Action.r,props,"→");try{SubmitAction.displayName="SubmitAction",SubmitAction.__docgenInfo={description:"",displayName:"SubmitAction",props:{onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"MouseEventHandler<Element>"}},onMouseEnter:{defaultValue:null,description:"",name:"onMouseEnter",required:!1,type:{name:"MouseEventHandler<Element>"}},onMouseLeave:{defaultValue:null,description:"",name:"onMouseLeave",required:!1,type:{name:"MouseEventHandler<Element>"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},tooltip:{defaultValue:null,description:"",name:"tooltip",required:!1,type:{name:"ReactNode"}},onMouseOver:{defaultValue:null,description:"",name:"onMouseOver",required:!1,type:{name:"MouseEventHandler<Element>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/buttons/Action/SubmitAction.tsx#SubmitAction"]={docgenInfo:SubmitAction.__docgenInfo,name:"SubmitAction",path:"src/buttons/Action/SubmitAction.tsx#SubmitAction"})}catch(__react_docgen_typescript_loader_error){}const StrEdit=_ref=>{let{node,onCancel,onDone}=_ref;const[t]=(0,use_t_lib.useT)(),inputRef=react.useRef(),{model}=useJsonCrdt(),[clone,api]=react.useMemo(()=>{const clone=model.clone();clone.api.flush();const str=clone.index.get(node.node.id),api=clone.api.wrap(str);return[clone,api]},[]),value=react.useSyncExternalStore(api.events.subscribe,api.events.getSnapshot);react.useEffect(()=>{if(!inputRef.current)return;const unbind=(0,collaborative_input_lib.o)(()=>api,inputRef.current);return()=>{unbind()}},[model]);const handleSubmit=()=>{if(!!clone.api.builder.patch.ops.length){const patch=clone.api.flush();model.applyLocalPatch(patch)}onDone()},style=(0,utils.C8)(lib.theme,!lib.theme.isLight,'""');return style.margin="-3px -3px -3px -5px",style.padding="2px 4px",style.border=`1px solid ${lib.theme.g(.85)}`,react.createElement("span",{className:css.hF,style},react.createElement(flexible_input_lib.O,{focus:!0,inp:el=>{inputRef.current=el},value,multiline:!0,uncontrolled:!0,typebefore:'"',typeahead:'"',maxWidth:800,onSubmit:handleSubmit,onFocus:e=>(0,selectOnFocus.a)(e.target),onCancel:()=>{onCancel&&onCancel()}}),react.createElement(CancelAction.T,{onClick:onCancel,tooltip:t("Cancel")}),react.createElement("span",{className:css.kv},react.createElement(SubmitAction,{onClick:handleSubmit,tooltip:t("Done (Ctrl + Enter)")})))};try{StrEdit.displayName="StrEdit",StrEdit.__docgenInfo={description:"",displayName:"StrEdit",props:{node:{defaultValue:null,description:"",name:"node",required:!0,type:{name:"NodeRef<StrNode<string>>"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!1,type:{name:"(() => void)"}},onDone:{defaultValue:null,description:"",name:"onDone",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ClickableJsonCrdt/nodes/JsonCrdtStrNode/StrEdit.tsx#StrEdit"]={docgenInfo:StrEdit.__docgenInfo,name:"StrEdit",path:"src/ClickableJsonCrdt/nodes/JsonCrdtStrNode/StrEdit.tsx#StrEdit"})}catch(__react_docgen_typescript_loader_error){}const atomClass=(0,lib.rule)({d:"inline-block",pos:"relative",cur:"pointer",bdrad:"2px"}),atomFocusedClass=(0,lib.rule)({out:"1px dotted transparent","&:hover":{out:`1px dotted ${lib.theme.color.sem.blue[0]}`},[`&:hover .${css.YL.trim()}`]:{d:"inline-block"}}),JsonCrdtStrNode=_ref=>{let{node}=_ref;const[t]=(0,use_t_lib.useT)(),{formal,readonly}=(0,style.I)(),{focused}=(0,context_focus.iQ)(),[editing,setEditing]=react.useState(!1),isFocused=focused===id(node);return react.createElement(JsonCrdtRegion,{node,editing},react.createElement(JsonCrdtProperty,{node}),editing?react.createElement(StrEdit,{node,onCancel:()=>setEditing(!1),onDone:()=>setEditing(!1)}):react.createElement("span",{className:atomClass+(isFocused&&!readonly?atomFocusedClass:""),onClick:isFocused&&!readonly?()=>setEditing(!0):void 0},react.createElement(JsonAtom.y,{value:node.node.view()}),!readonly&&react.createElement("span",{className:css.YL},t("Edit"))),!!formal&&",")};try{JsonCrdtStrNode.displayName="JsonCrdtStrNode",JsonCrdtStrNode.__docgenInfo={description:"",displayName:"JsonCrdtStrNode",props:{node:{defaultValue:null,description:"",name:"node",required:!0,type:{name:"NodeRef<StrNode<string>>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ClickableJsonCrdt/nodes/JsonCrdtStrNode/index.tsx#JsonCrdtStrNode"]={docgenInfo:JsonCrdtStrNode.__docgenInfo,name:"JsonCrdtStrNode",path:"src/ClickableJsonCrdt/nodes/JsonCrdtStrNode/index.tsx#JsonCrdtStrNode"})}catch(__react_docgen_typescript_loader_error){}const JsonCrdtBinNode=_ref=>{let{node}=_ref;const{formal}=(0,style.I)();return react.createElement(JsonCrdtRegion,{node},react.createElement(JsonCrdtProperty,{node}),react.createElement(JsonAtom.y,{value:node.node.view()}),!!formal&&",")};try{JsonCrdtBinNode.displayName="JsonCrdtBinNode",JsonCrdtBinNode.__docgenInfo={description:"",displayName:"JsonCrdtBinNode",props:{node:{defaultValue:null,description:"",name:"node",required:!0,type:{name:"NodeRef<BinNode>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ClickableJsonCrdt/nodes/JsonCrdtBinNode.tsx#JsonCrdtBinNode"]={docgenInfo:JsonCrdtBinNode.__docgenInfo,name:"JsonCrdtBinNode",path:"src/ClickableJsonCrdt/nodes/JsonCrdtBinNode.tsx#JsonCrdtBinNode"})}catch(__react_docgen_typescript_loader_error){}const render=node=>node.node instanceof json_crdt.ConNode?react.createElement(JsonCrdtConNode,{node}):node.node instanceof json_crdt.ValNode?react.createElement(JsonCrdtValNode,{node}):node.node instanceof json_crdt.ObjNode?react.createElement(JsonCrdtObjNode,{node}):node.node instanceof json_crdt.StrNode?react.createElement(JsonCrdtStrNode,{node}):node.node instanceof json_crdt.VecNode?react.createElement(JsonCrdtVecNode,{node}):node.node instanceof json_crdt.ArrNode?react.createElement(JsonCrdtArrNode,{node}):node.node instanceof json_crdt.BinNode?react.createElement(JsonCrdtBinNode,{node}):"∅",ClickableJsonCrdt=props=>{const{model,compact,readonly,showRoot,onFocus}=props,[reset,setReset]=react.useState(0);react.useEffect(()=>{const unsubscribe=model.api.onReset.listen(()=>setReset(r=>r+1));return()=>unsubscribe()},[model]);const node=react.useMemo(()=>nodeRef(showRoot?model.root:model.root.node(),null,""),[model,reset]);return react.createElement(style._.Provider,{value:{compact,readonly}},react.createElement(context.Provider,{value:{model,render}},react.createElement(context_focus.uZ,{onFocus},!!node&&react.createElement(Root.b,{key:reset},render(node)))))};try{ClickableJsonCrdt.displayName="ClickableJsonCrdt",ClickableJsonCrdt.__docgenInfo={description:"",displayName:"ClickableJsonCrdt",props:{model:{defaultValue:null,description:"The JSON CRDT model to display.",name:"model",required:!0,type:{name:"Model<any>"}},showRoot:{defaultValue:null,description:"Whether to display the root node.",name:"showRoot",required:!1,type:{name:"boolean"}},readonly:{defaultValue:{value:"false"},description:"If true, the JSON is not editable. Useful for displaying JSON.",name:"readonly",required:!1,type:{name:"boolean"}},formal:{defaultValue:{value:"false"},description:"Print the JSON in a more formal way. Adds quotes to keys and string values.\nAdds commas after each property.\n\nWorks only in readonly mode.",name:"formal",required:!1,type:{name:"boolean"}},keepOrder:{defaultValue:{value:"false"},description:"Keep the order of properties in objects. By default the properties are\nsorted alphabetically.",name:"keepOrder",required:!1,type:{name:"boolean"}},fontSize:{defaultValue:{value:"13.4px"},description:"Font size of the JSON.",name:"fontSize",required:!1,type:{name:"string"}},compact:{defaultValue:{value:"false"},description:"If true, the JSON is printed in a compact way. Reduces spacing between\nelements.",name:"compact",required:!1,type:{name:"boolean"}},collapsed:{defaultValue:{value:"false"},description:"If true, the JSON starts collapsed, but can be expanded by clicking on it.",name:"collapsed",required:!1,type:{name:"boolean"}},noCollapseToggles:{defaultValue:{value:"false"},description:"Whether to show +/- buttons to expand/collapse objects and arrays.",name:"noCollapseToggles",required:!1,type:{name:"boolean"}},onFocus:{defaultValue:null,description:"",name:"onFocus",required:!1,type:{name:"((id: string | null) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ClickableJsonCrdt/index.tsx#ClickableJsonCrdt"]={docgenInfo:ClickableJsonCrdt.__docgenInfo,name:"ClickableJsonCrdt",path:"src/ClickableJsonCrdt/index.tsx#ClickableJsonCrdt"})}catch(__react_docgen_typescript_loader_error){}var json_crdt_patch=__webpack_require__("./node_modules/json-joy/lib/json-crdt-patch/index.js"),json_crdt_extensions=__webpack_require__("./node_modules/json-joy/lib/json-crdt-extensions/index.js");function index_stories_extends(){return index_stories_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},index_stories_extends.apply(null,arguments)}const index_stories={title:"ClickableJsonCrdt",component:ClickableJsonCrdt,parameters:{layout:"centered"},tags:["autodocs"],argTypes:{}},Demo=({view,withExtensions,...rest})=>{const model=react.useMemo(()=>{const model=(withExtensions?json_crdt_extensions.ModelWithExt:json_crdt.Model).create();return void 0!==view&&model.api.root(view),model},[]);return react.useSyncExternalStore(model.api.subscribe,()=>model.tick),react.createElement("div",{style:{padding:"32px 64px",boxSizing:"border-box"}},react.createElement(ClickableJsonCrdt,index_stories_extends({},rest,{model})),react.createElement("pre",{style:{fontSize:"10px"}},react.createElement("code",null,model.root+"")))},schema1={foo:json_crdt_patch.s.con([123,[null]]),bar:!0,baz:{x:1,val:json_crdt_patch.s.val(json_crdt_patch.s.con(!0)),str:json_crdt_patch.s.str("hello world")},emptyObject:{},qux:json_crdt_patch.s.vec(json_crdt_patch.s.con(1),json_crdt_patch.s.con(-2),json_crdt_patch.s.con("three"),json_crdt_patch.s.con({four:4})),arr:[json_crdt_patch.s.con(0),"hello world",-5,json_crdt_patch.s.val(json_crdt_patch.s.val(json_crdt_patch.s.con(null))),json_crdt_patch.s.val(json_crdt_patch.s.con({foo:"bar"}))],bin:json_crdt_patch.s.bin(new Uint8Array([1,2,3,4,5]))},doc2={id:"pj7ryzaia1",model:1.65555,cid:"og6f0o9v1c",type:"p",created:1596445997247,modified:1596445997381,pid:"92lmu7fs9a",depth:0,mime:"image/png",ext:"png",file:"image.png",w:624,h:1390,omark:[{x1:.027777777777777776,y1:.8438848920863309,x2:.25,y2:.8827338129496403}],isPost:!0,isMature:!1,parent:null,poster:{id:"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",name:"Muhammad",list:[1,-5,!0,!1,null,"asdf"]}},Primary={render:()=>react.createElement(Demo,{view:schema1,onFocus:id=>console.log("onFocus",id)}),parameters:{layout:"fullscreen"}},Readonly={render:()=>react.createElement(Demo,{view:schema1,readonly:!0}),parameters:{layout:"fullscreen"}},ShowRoot={render:()=>react.createElement(Demo,{view:schema1,showRoot:!0}),parameters:{layout:"fullscreen"}},InteractiveLarge={render:()=>react.createElement(Demo,{view:doc2}),parameters:{layout:"fullscreen"}},EmptyDoc={render:()=>react.createElement(Demo,null),parameters:{layout:"fullscreen"}},ConstantRoot={render:()=>react.createElement(Demo,{view:json_crdt_patch.s.con(123456789)}),parameters:{layout:"fullscreen"}},ConstantRootJson={render:()=>react.createElement(Demo,{view:json_crdt_patch.s.con({foo:[123,"bar"]})}),parameters:{layout:"fullscreen"}},LongValues={render:()=>react.createElement(Demo,{view:{binaryData:json_crdt_patch.s.bin(new Uint8Array([1,2,3,4,5,6,7,8,9,10,11,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,255,254,253,252,251,250,249,248,247,246,245,244,243,242,241,240,239,238,128,127,126,125,124,123,122,121,120,119,118,117,116,115,114,113,112,111,128,127,126,125,124,123,122,121,120,119,118,117,116,115,114,113,112,111,128,127,126,125,1,2,3,4,5,6,7,8,9,10,11,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,255,254,253,252,251,250,249,248,247,246,245,244,243,242,241,240,239,238,128,127,126,125,124,123,122,121,120,119,118,117,116,115,114,113,112,111,128,127,126,125,124,123,122,121,120,119,118,117,116,115,114,113,112,111,128,127,126,125,1,2,3,4,5,6,7,8,9,10,11,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,255,254,253,252,251,250,249,248,247,246,245,244,243,242,241,240,239,238,128,127,126,125,124,123,122,121,120,119,118,117,116,115,114,113,112,111,128,127,126,125,124,123,122,121,120,119,118,117,116,115,114,113,112,111,128,127,126,125,1,2,3,4,5,6,7,8,9,10,11,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,255,254,253,252,251,250,249,248,247,246,245,244,243,242,241,240,239,238,128,127,126,125,124,123,122,121,120,119,118,117,116,115,114,113,112,111,128,127,126,125,124,123,122,121,120,119,118,117,116,115,114,113,112,111,128,127,126,125])),longString:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec a diam lectus. Sed sit amet ipsum mauris. Maecenas congue ligula ac quam viverra nec consectetur ante hendrerit. Donec et mollis dolor. Praesent et diam eget libero egestas mattis sit amet vitae augue. Nam tincidunt congue enim, ut porta lorem lacinia consectetur. Donec ut libero sed arcu vehicula ultricies a non tortor. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean ut gravida lorem. Ut turpis felis, pulvinar a semper sed, adipiscing id dolor. Pellentesque auctor nisi id magna consequat sagittis. Curabitur dapibus enim sit amet elit pharetra tincidunt feugiat nisl imperdiet. Ut convallis libero in urna ultrices accumsan. Donec sed odio eros. Donec viverra mi quis quam pulvinar at malesuada arcu rhoncus. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. In rutrum accumsan ultricies. Mauris vitae nisi at sem facilisis semper ac in est."}}),parameters:{layout:"fullscreen"}},VectorNode={render:()=>react.createElement(Demo,{view:json_crdt_patch.s.vec(json_crdt_patch.s.con(123),json_crdt_patch.s.str("abc"))}),parameters:{layout:"fullscreen"}},MultivalueRegisterExtension={render:()=>react.createElement(Demo,{view:json_crdt_patch.s.obj({mval:json_crdt_extensions.ModelWithExt.ext.mval.new(123)}),withExtensions:!0}),parameters:{layout:"fullscreen"}},PeritextExtension={render:()=>react.createElement(Demo,{view:json_crdt_patch.s.obj({extension:json_crdt_extensions.ModelWithExt.ext.peritext.new("text..."),vector:json_crdt_patch.s.vec(json_crdt_patch.s.con(123),json_crdt_patch.s.con("abc"),json_crdt_patch.s.con(null))}),withExtensions:!0}),parameters:{layout:"fullscreen"}},QuillExtension={render:()=>react.createElement(Demo,{view:json_crdt_patch.s.obj({quill:json_crdt_extensions.ModelWithExt.ext.quill.new("abc")}),withExtensions:!0}),parameters:{layout:"fullscreen"}},ResetDemo=()=>{const[model1,model2]=react.useMemo(()=>{const model=json_crdt.Model.create();return[model,model.clone()]},[]);return react.createElement("div",{style:{padding:"32px 64px",boxSizing:"border-box"}},react.createElement("button",{onClick:()=>{model1.reset(model2)}},"Reset"),react.createElement("br",null),react.createElement(ClickableJsonCrdt,{model:model1,showRoot:!0}))},Reset={render:()=>react.createElement(ResetDemo,null),parameters:{layout:"fullscreen"}},__namedExportsOrder=["Primary","Readonly","ShowRoot","InteractiveLarge","EmptyDoc","ConstantRoot","ConstantRootJson","LongValues","VectorNode","MultivalueRegisterExtension","PeritextExtension","QuillExtension","Reset"];Primary.parameters={...Primary.parameters,docs:{...Primary.parameters?.docs,source:{originalSource:"{\n  render: () => <Demo view={schema1} onFocus={id => console.log('onFocus', id)} />,\n  parameters: {\n    layout: 'fullscreen'\n  }\n}",...Primary.parameters?.docs?.source}}},Readonly.parameters={...Readonly.parameters,docs:{...Readonly.parameters?.docs,source:{originalSource:"{\n  render: () => <Demo view={schema1} readonly />,\n  parameters: {\n    layout: 'fullscreen'\n  }\n}",...Readonly.parameters?.docs?.source}}},ShowRoot.parameters={...ShowRoot.parameters,docs:{...ShowRoot.parameters?.docs,source:{originalSource:"{\n  render: () => <Demo view={schema1} showRoot />,\n  parameters: {\n    layout: 'fullscreen'\n  }\n}",...ShowRoot.parameters?.docs?.source}}},InteractiveLarge.parameters={...InteractiveLarge.parameters,docs:{...InteractiveLarge.parameters?.docs,source:{originalSource:"{\n  render: () => <Demo view={doc2} />,\n  parameters: {\n    layout: 'fullscreen'\n  }\n}",...InteractiveLarge.parameters?.docs?.source}}},EmptyDoc.parameters={...EmptyDoc.parameters,docs:{...EmptyDoc.parameters?.docs,source:{originalSource:"{\n  render: () => <Demo />,\n  parameters: {\n    layout: 'fullscreen'\n  }\n}",...EmptyDoc.parameters?.docs?.source}}},ConstantRoot.parameters={...ConstantRoot.parameters,docs:{...ConstantRoot.parameters?.docs,source:{originalSource:"{\n  render: () => <Demo view={s.con(123456789)} />,\n  parameters: {\n    layout: 'fullscreen'\n  }\n}",...ConstantRoot.parameters?.docs?.source}}},ConstantRootJson.parameters={...ConstantRootJson.parameters,docs:{...ConstantRootJson.parameters?.docs,source:{originalSource:"{\n  render: () => <Demo view={s.con({\n    foo: [123, 'bar']\n  })} />,\n  parameters: {\n    layout: 'fullscreen'\n  }\n}",...ConstantRootJson.parameters?.docs?.source}}},LongValues.parameters={...LongValues.parameters,docs:{...LongValues.parameters?.docs,source:{originalSource:"{\n  render: () => <Demo view={{\n    binaryData: s.bin(new Uint8Array([1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 127, 128, 129, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139, 140, 141, 142, 143, 144, 145, 146, 255, 254, 253, 252, 251, 250, 249, 248, 247, 246, 245, 244, 243, 242, 241, 240, 239, 238, 128, 127, 126, 125, 124, 123, 122, 121, 120, 119, 118, 117, 116, 115, 114, 113, 112, 111, 128, 127, 126, 125, 124, 123, 122, 121, 120, 119, 118, 117, 116, 115, 114, 113, 112, 111, 128, 127, 126, 125, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 127, 128, 129, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139, 140, 141, 142, 143, 144, 145, 146, 255, 254, 253, 252, 251, 250, 249, 248, 247, 246, 245, 244, 243, 242, 241, 240, 239, 238, 128, 127, 126, 125, 124, 123, 122, 121, 120, 119, 118, 117, 116, 115, 114, 113, 112, 111, 128, 127, 126, 125, 124, 123, 122, 121, 120, 119, 118, 117, 116, 115, 114, 113, 112, 111, 128, 127, 126, 125, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 127, 128, 129, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139, 140, 141, 142, 143, 144, 145, 146, 255, 254, 253, 252, 251, 250, 249, 248, 247, 246, 245, 244, 243, 242, 241, 240, 239, 238, 128, 127, 126, 125, 124, 123, 122, 121, 120, 119, 118, 117, 116, 115, 114, 113, 112, 111, 128, 127, 126, 125, 124, 123, 122, 121, 120, 119, 118, 117, 116, 115, 114, 113, 112, 111, 128, 127, 126, 125, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 127, 128, 129, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139, 140, 141, 142, 143, 144, 145, 146, 255, 254, 253, 252, 251, 250, 249, 248, 247, 246, 245, 244, 243, 242, 241, 240, 239, 238, 128, 127, 126, 125, 124, 123, 122, 121, 120, 119, 118, 117, 116, 115, 114, 113, 112, 111, 128, 127, 126, 125, 124, 123, 122, 121, 120, 119, 118, 117, 116, 115, 114, 113, 112, 111, 128, 127, 126, 125])),\n    longString: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec a diam lectus. Sed sit amet ipsum mauris. ' + 'Maecenas congue ligula ac quam viverra nec consectetur ante hendrerit. Donec et mollis dolor. ' + 'Praesent et diam eget libero egestas mattis sit amet vitae augue. Nam tincidunt congue enim, ' + 'ut porta lorem lacinia consectetur. Donec ut libero sed arcu vehicula ultricies a non tortor. ' + 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean ut gravida lorem. ' + 'Ut turpis felis, pulvinar a semper sed, adipiscing id dolor. Pellentesque auctor nisi id magna consequat ' + 'sagittis. Curabitur dapibus enim sit amet elit pharetra tincidunt feugiat nisl imperdiet. ' + 'Ut convallis libero in urna ultrices accumsan. Donec sed odio eros. Donec viverra mi quis quam pulvinar ' + 'at malesuada arcu rhoncus. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ' + 'ridiculus mus. In rutrum accumsan ultricies. Mauris vitae nisi at sem facilisis semper ac in est.'\n  }} />,\n  parameters: {\n    layout: 'fullscreen'\n  }\n}",...LongValues.parameters?.docs?.source}}},VectorNode.parameters={...VectorNode.parameters,docs:{...VectorNode.parameters?.docs,source:{originalSource:"{\n  render: () => <Demo view={s.vec(s.con(123), s.str('abc'))} />,\n  parameters: {\n    layout: 'fullscreen'\n  }\n}",...VectorNode.parameters?.docs?.source}}},MultivalueRegisterExtension.parameters={...MultivalueRegisterExtension.parameters,docs:{...MultivalueRegisterExtension.parameters?.docs,source:{originalSource:"{\n  render: () => <Demo view={s.obj({\n    mval: ModelWithExt.ext.mval.new(123)\n  })} withExtensions />,\n  parameters: {\n    layout: 'fullscreen'\n  }\n}",...MultivalueRegisterExtension.parameters?.docs?.source}}},PeritextExtension.parameters={...PeritextExtension.parameters,docs:{...PeritextExtension.parameters?.docs,source:{originalSource:"{\n  render: () => <Demo view={s.obj({\n    extension: ModelWithExt.ext.peritext.new('text...'),\n    vector: s.vec(s.con(123), s.con('abc'), s.con(null))\n  })} withExtensions />,\n  parameters: {\n    layout: 'fullscreen'\n  }\n}",...PeritextExtension.parameters?.docs?.source}}},QuillExtension.parameters={...QuillExtension.parameters,docs:{...QuillExtension.parameters?.docs,source:{originalSource:"{\n  render: () => <Demo view={s.obj({\n    quill: ModelWithExt.ext.quill.new('abc')\n  })} withExtensions />,\n  parameters: {\n    layout: 'fullscreen'\n  }\n}",...QuillExtension.parameters?.docs?.source}}},Reset.parameters={...Reset.parameters,docs:{...Reset.parameters?.docs,source:{originalSource:"{\n  render: () => <ResetDemo />,\n  parameters: {\n    layout: 'fullscreen'\n  }\n}",...Reset.parameters?.docs?.source}}}}}]);